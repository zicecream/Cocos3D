System.register("chunks:///_virtual/GamePhysicsData.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var s,e,n;return{setters:[function(t){s=t.createClass,e=t.defineProperty},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"22e3aB3cEpItYTjlw7FAHW7","GamePhysicsData",void 0);var c=t("GamePhysicsData",function(){function t(){}return t.clearBlocks=function(){this.bolcksData=[]},t.clearLines=function(){this.lines=[]},s(t,[{key:"bolcksData",set:function(t){this.bolcksData.push(t)},get:function(){return this.bolcksData}},{key:"lines",set:function(t){this.lines.push(t)},get:function(){return this.lines}}]),t}());e(c,"bolcksData",[]),e(c,"lines",[]),n._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./PlayerController.ts"],(function(t){"use strict";var e,r,n,i,a,o,s,l,u,c,h,p,f,_,d,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.defineProperty,i=t.assertThisInitialized,a=t.initializerDefineProperty,o=t.createClass},function(t){s=t.cclegacy,l=t._decorator,u=t.Prefab,c=t.CCInteger,h=t.Node,p=t.Label,f=t.v3,_=t.instantiate,d=t.Component},function(t){y=t.PlayerController}],execute:function(){var b,N,S,T,g,G,I,v,m,P,B,C,L;s._RF.push({},"51398BHiRlMVL0+vefN7D2H","GameManager",void 0);var E,M,w=l.ccclass,O=l.property;!function(t){t[t.BT_NONE=0]="BT_NONE",t[t.BT_STONE=1]="BT_STONE"}(E||(E={})),function(t){t[t.GS_INIT=0]="GS_INIT",t[t.GS_PLAYING=1]="GS_PLAYING",t[t.GS_END=2]="GS_END"}(M||(M={}));t("GameManager",(b=w("GameManager"),N=O({type:u}),S=O({type:c}),T=O({type:y}),g=O({type:h}),G=O({type:p}),b((m=e((v=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(i(e),"_curState",M.GS_INIT),a(i(e),"cubePrfb",m,i(e)),a(i(e),"roadLength",P,i(e)),n(i(e),"_road",[]),a(i(e),"playerCtrl",B,i(e)),a(i(e),"startMenu",C,i(e)),a(i(e),"stepsLabel",L,i(e)),e}r(e,t);var s=e.prototype;return s.start=function(){this.curState=M.GS_INIT,this.playerCtrl.node.on("JumpEnd",this.onPlayerJumpEnd,this)},s.init=function(){this.startMenu.active=!0,this.generateRoad(),this.playerCtrl.setInputActive(!1),this.playerCtrl.node.setPosition(f()),this.playerCtrl.reset()},s.onStartButtonClicked=function(){this.curState=M.GS_PLAYING},s.generateRoad=function(){this.node.removeAllChildren(),this._road=[],this._road.push(E.BT_STONE);for(var t=1;t<this.roadLength;t++)this._road[t-1]===E.BT_NONE?this._road.push(E.BT_STONE):this._road.push(Math.floor(2*Math.random()));for(var e=0;e<this._road.length;e++){var r=this.spawnBlockByType(this._road[e]);r&&(this.node.addChild(r),r.setPosition(e,-1.5,0))}},s.onPlayerJumpEnd=function(t){this.stepsLabel.string=""+t,this.checkResult(t)},s.checkResult=function(t){t<=this.roadLength?this._road[t]==E.BT_NONE&&(this.curState=M.GS_INIT):this.curState=M.GS_INIT},s.spawnBlockByType=function(t){var e=null;switch(t){case E.BT_STONE:e=_(this.cubePrfb)}return e},o(e,[{key:"curState",set:function(t){var e=this;switch(t){case M.GS_INIT:this.init();break;case M.GS_PLAYING:this.stepsLabel.string="0",this.startMenu.active=!1,setTimeout((function(){e.playerCtrl.setInputActive(!0)}),.1);case M.GS_END:}this._curState=t}}]),e}(d)).prototype,"cubePrfb",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(v.prototype,"roadLength",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),B=e(v.prototype,"playerCtrl",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(v.prototype,"startMenu",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(v.prototype,"stepsLabel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=v))||I));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameTreeLineHud.ts",["cc"],(function(e){"use strict";var r,c;return{setters:[function(e){r=e.cclegacy,c=e._decorator}],execute:function(){var t;r._RF.push({},"73aeboh2uhOlrLGPZlOuXb1","GameTreeLineHud",void 0);var u=c.ccclass;c.property,e("GameTreeLineHud",u("GameTreeLineHud")(t=function(){})||t);r._RF.pop()}}}));

System.register("chunks:///_virtual/CollideManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GamePhysicsData.ts","./GameStatus.ts"],(function(t){"use strict";var r,e,s,o,i,n;return{setters:[function(t){r=t.inheritsLoose},function(t){e=t.cclegacy,s=t._decorator,o=t.Component},function(t){i=t.GamePhysicsData},function(t){n=t.GameStatus}],execute:function(){var a;t({collideRoundRound:function(t,r){var e=t.y-t.r,s=2*t.r,o=r.y-r.r,i=2*r.r,n=t.x-t.r,a=2*t.r,c=r.x-r.r,u=2*r.r;return!(e+s<o||e>o+i||n+a<c||n>c+u)},collideRoundSquare:u}),e._RF.push({},"a24edTwbOhGhZA6uPz5CQd1","CollideManager",void 0);var c=s.ccclass;s.property;function u(t,r){var e=t.y-t.r,s=2*t.r,o=r.y,i=r.h,n=t.x-t.r,a=2*t.r,c=r.x,u=r.w;return!(e+s<o||e>o+i||n+a<c||n>c+u)}t("CollideManager",c("CollideManager")(a=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.physicsWorld=function(t){if(i.bolcksData.length>0&&!n.isDead){if(this.posX-this.posR<0||this.posX+this.posY>screen.width)return void(this.isDead=!0);for(var r=0;r<this.blocks.length&&!u(this,this.blocks[r]);r++);}},e}(o))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/GameDrawLiner.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GamePhysicsData.ts","./GameStatus.ts","./CollideManager.ts"],(function(s){"use strict";var e,i,t,o,r,n,a;return{setters:[function(s){e=s.defineProperty},function(s){i=s.cclegacy,t=s._decorator,o=s.Color},function(s){r=s.GamePhysicsData},function(s){n=s.GameStatus},function(s){a=s.collideRoundSquare}],execute:function(){var h;i._RF.push({},"a3b34RiHVhCgruk6AE5JuUZ","GameDrawLiner",void 0);var c=t.ccclass;t.property,s("GameDrawLiner",c("GameDrawLiner")(h=function(){function s(){e(this,"posX",0),e(this,"posY",.5*-screen.height+400),e(this,"posR",5),e(this,"clearCount",200),e(this,"speedX",4),e(this,"speedY",4),e(this,"speed",4),e(this,"tarX",-1),e(this,"tarXRate",-1),e(this,"tarXTime",0),e(this,"lineColor",new o(122,64,200,255))}var i=s.prototype;return i.clearGone=function(){for(var s=r.lines.length-1;s>=0;s--)if(r.lines[s].y<-screen.height-.5*this.posR*2){r.lines.splice(0,s);break}},i.draw=function(s){var e=r.lines[0],i=r.lines[r.lines.length-1];e&&i&&(s.moveTo(e.x,e.y),s.strokeColor=this.lineColor,s.lineWidth=20,r.lines.forEach((function(e){s.lineTo(e.x,e.y)})),s.stroke())},i.physicsWorld=function(s){var e=this;if(r.lines.length>=this.clearCount&&this.clearGone(),r.lines.forEach((function(s){s.y-=e.speedY})),-1==this.tarX){var i=n.directionX;this.posX+=i}if(n.isDead||r.lines.push({x:this.posX,y:this.posY,r:this.posR,color:this.lineColor}),r.bolcksData&&!n.isDead){if(this.posX-this.posR<.5*-screen.width||this.posX+this.posR>.5*screen.width)return void(n.isDead=!0);for(var t=r.bolcksData,o=0;o<t.length;o++)if(a({x:this.posX,y:this.posY,r:this.posR},t[o])){n.isDead=!0;break}}},i.resetXYR=function(){this.posX=0,this.posY=.5*-screen.height+400,this.posR=5},s}())||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/GameStatus.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,n;return{setters:[function(e){t=e.createClass,i=e.defineProperty},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"aec372PaXJG+olyETVwdJOp","GameStatus",void 0);var c=e("GameStatus",function(){function e(){}return t(e,[{key:"isDead",set:function(e){this.isDead=e}}]),e}());i(c,"isDead",!1),i(c,"blockSpeed",4),i(c,"lineSpeed",4),i(c,"level",1),i(c,"touchDirection",[]),i(c,"directionX",0),n._RF.pop()}}}));

System.register("chunks:///_virtual/GameThreeLine.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GamePhysicsData.ts","./GameStatus.ts","./GameDrawLiner.ts","./BlockSpawner.ts"],(function(e){"use strict";var t,i,n,r,s,a,o,c,l,h,u,p,d,b,f,y,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,s=e.defineProperty},function(e){a=e.cclegacy,o=e._decorator,c=e.Canvas,l=e.Graphics,h=e.Button,u=e.AudioSource,p=e.Node,d=e.Component},function(e){b=e.GamePhysicsData},function(e){f=e.GameStatus},function(e){y=e.GameDrawLiner},function(e){w=e.BlockSpawner}],execute:function(){var T,m,v,B,D,E,S,_,j,C,L,G,O;a._RF.push({},"d7647v52P9IwYk8s8SUcU87","GameThreeLine",void 0);var g=o.ccclass,k=o.property;e("GameThreeLine",(T=g("GameThreeLine"),m=k(c),v=k(l),B=k(h),D=k(u),E=k(h),T((j=t((_=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(r(t),"canvas",j,r(t)),n(r(t),"pen",C,r(t)),n(r(t),"directionBtn",L,r(t)),n(r(t),"audioSource",G,r(t)),n(r(t),"resetBtn",O,r(t)),s(r(t),"objects",[]),s(r(t),"prevTime",Date.now()),s(r(t),"speed",4),s(r(t),"pause",!1),s(r(t),"play",!0),s(r(t),"timeTillLevel",1e3),s(r(t),"timer",0),s(r(t),"timeDelta",0),t}i(t,e);var a=t.prototype;return a.start=function(){this.blockSpawner=new w,this.line=new y,this.addObject("spawner",this.blockSpawner),this.addObject("line",this.line),this.directionBtn.node.on(p.EventType.TOUCH_MOVE,this.directionBtnTouchs,this),this.directionBtn.node.on(p.EventType.TOUCH_END,this.directionBtnTouchs,this),this.directionBtn.node.on(p.EventType.TOUCH_CANCEL,this.directionBtnTouchs,this)},a.resetGame=function(){this.audioSource.play(),b.clearBlocks(),b.clearLines(),f.isDead=!1,this.resetBtn.node.active=!1,this.line.resetXYR()},a.update=function(e){f.isDead?this.resetBtn.node.active||(this.resetBtn.node.active=!0,this.audioSource.stop()):(this.timeDelta=e,this.pen.clear(),this.physicsWorld(e),this.draw())},a.directionBtnTouchs=function(e){switch(e.type){case p.EventType.TOUCH_START:break;case p.EventType.TOUCH_MOVE:this.line.tarX=-1,f.directionX=e.getDeltaX();break;case p.EventType.TOUCH_END:case p.EventType.TOUCH_CANCEL:this.line.tarX=1}},a.physicsWorld=function(e){this.timer+=e,this.timer>this.timeTillLevel&&(this.timer=0,this.objects.spawner&&(this.objects.spawner.level+=1),this.objects.power_spawn&&this.objects.power_spawn.spawn()),this.objects.forEach((function(t){t.physicsWorld(e)}))},a.draw=function(){var e=this;this.objects.forEach((function(t){t.draw(e.pen)}))},a.addObject=function(e,t){this.objects[e]=t,this.objects.push(t)},t}(d)).prototype,"canvas",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(_.prototype,"pen",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(_.prototype,"directionBtn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(_.prototype,"audioSource",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(_.prototype,"resetBtn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=_))||S));a._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerController.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,o,s,n,r,u,p,c,h,_,a,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized,n=t.defineProperty},function(t){r=t.cclegacy,u=t._decorator,p=t.Node,c=t.v3,h=t.systemEvent,_=t.SystemEvent,a=t.Vec3,l=t.Component}],execute:function(){var m,d,y,P,v;r._RF.push({},"dbc74UMEx1FZYS+oMRMOhje","PlayerController",void 0);var f=u.ccclass,M=u.property;t("PlayerController",(m=f("PlayerController"),d=M({type:p}),m((v=e((P=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),u=0;u<i;u++)r[u]=arguments[u];return e=t.call.apply(t,[this].concat(r))||this,o(s(e),"BodyAnim",v,s(e)),n(s(e),"_curMoveIndex",0),n(s(e),"_startJump",!1),n(s(e),"_jumpStep",0),n(s(e),"_curJumpTime",0),n(s(e),"_curJumpSpeed",0),n(s(e),"_jumpTime",.1),n(s(e),"_curPos",c()),n(s(e),"_deltaPos",c(0,0,0)),n(s(e),"_targetPos",c()),n(s(e),"_isMoving",!1),e}i(e,t);var r=e.prototype;return r.start=function(){h.on(_.EventType.MOUSE_UP,this.onMouseUp,this)},r.onMouseUp=function(t){console.log("PlayerController EventMouse:"+t.getButton()),0===t.getButton()?this.jumpByStep(1):2===t.getButton()&&this.jumpByStep(2)},r.jumpByStep=function(t){this._isMoving||((1==t||2==t)&&this.BodyAnim.getComponent("cc.Animation").play("oneStep"),this._startJump=!0,this._jumpStep=t,this._curJumpTime=0,this._curJumpSpeed=this._jumpStep/this._jumpTime,this.node.getPosition(this._curPos),a.add(this._targetPos,this._curPos,c(this._jumpStep,0,0)),this._curMoveIndex+=t,this._isMoving=!0)},r.reset=function(){this._curMoveIndex=0},r.setInputActive=function(t){t?h.on(_.EventType.MOUSE_UP,this.onMouseUp,this):h.off(_.EventType.MOUSE_UP,this.onMouseUp,this)},r.onOnceJumpEnd=function(){this._isMoving=!1,this.node.emit("JumpEnd",this._curMoveIndex)},r.update=function(t){this._startJump&&(this._curJumpTime+=t,this._curJumpTime>this._jumpTime?(this.node.setPosition(this._targetPos),this._startJump=!1,this.onOnceJumpEnd()):(this.node.getPosition(this._curPos),this._deltaPos.x=this._curJumpSpeed*t,a.add(this._curPos,this._curPos,this._deltaPos),this.node.setPosition(this._curPos)))},e}(l)).prototype,"BodyAnim",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=P))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/BlockSpawner.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GamePhysicsData.ts"],(function(t){"use strict";var o,r,e,i,s,a,n,c;return{setters:[function(t){o=t.inheritsLoose,r=t.defineProperty,e=t.assertThisInitialized},function(t){i=t.cclegacy,s=t._decorator,a=t.Component,n=t.Color},function(t){c=t.GamePhysicsData}],execute:function(){var h;i._RF.push({},"e663eyUQp1F5aEBULtivrMz","BlockSpawner",void 0);var l=s.ccclass,p=(s.property,function(){function t(t,o,e,i,s){r(this,"x",void 0),r(this,"y",void 0),r(this,"h",void 0),r(this,"w",void 0),r(this,"speed",4),r(this,"color",null),this.x=t||0,this.y=o||0,this.w=e||20,this.h=i||20,this.speed=s||4,this.color=this.color||new n(255*Math.random(),255*Math.random(),255*Math.random(),255)}var o=t.prototype;return o.draw=function(t){t.fillColor=this.color,t.fillRect(this.x,this.y,this.w,this.h)},o.physicsWorld=function(t){this.y-=this.speed},t}());t("BlockSpawner",l("BlockSpawner")(h=function(t){function i(){for(var o,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return o=t.call.apply(t,[this].concat(s))||this,r(e(o),"speed",4),r(e(o),"clearCount",200),r(e(o),"level",1),o}o(i,t);var s=i.prototype;return s.draw=function(t){c.bolcksData.forEach((function(o){o.draw(t)}))},s.physicsWorld=function(t){if(c.bolcksData.length>=this.clearCount)for(var o=c.bolcksData.length-1;o>=0;o--)if(c.bolcksData[o].y<.5*-screen.height){c.bolcksData.splice(0,o);break}for(var r=5;r-- >0;)if(100*Math.random()>100-this.level/2-1){var e=Math.random()*screen.width-.5*screen.width;e=e>0?e-100:e+100;var i=100*Math.random()+10,s=100*Math.random()+10,a=.5*screen.height;c.bolcksData.push(new p(e,a,i,s,this.speed))}c.bolcksData.forEach((function(o){o.physicsWorld(t)}))},i}(a))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/Game",["./GamePhysicsData.ts","./PlayerController.ts","./GameManager.ts","./GameTreeLineHud.ts","./GameStatus.ts","./CollideManager.ts","./GameDrawLiner.ts","./BlockSpawner.ts","./GameThreeLine.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/Game', 'chunks:///_virtual/Game'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});