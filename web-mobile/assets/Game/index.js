System.register("chunks:///_virtual/GameManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./PlayerController.ts"],(function(t){"use strict";var e,r,n,i,a,o,s,l,u,c,h,p,f,_,d,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.defineProperty,i=t.assertThisInitialized,a=t.initializerDefineProperty,o=t.createClass},function(t){s=t.cclegacy,l=t._decorator,u=t.Prefab,c=t.CCInteger,h=t.Node,p=t.Label,f=t.v3,_=t.instantiate,d=t.Component},function(t){y=t.PlayerController}],execute:function(){var b,N,S,T,g,G,I,v,m,P,B,C,L;s._RF.push({},"51398BHiRlMVL0+vefN7D2H","GameManager",void 0);var E,M,w=l.ccclass,O=l.property;!function(t){t[t.BT_NONE=0]="BT_NONE",t[t.BT_STONE=1]="BT_STONE"}(E||(E={})),function(t){t[t.GS_INIT=0]="GS_INIT",t[t.GS_PLAYING=1]="GS_PLAYING",t[t.GS_END=2]="GS_END"}(M||(M={}));t("GameManager",(b=w("GameManager"),N=O({type:u}),S=O({type:c}),T=O({type:y}),g=O({type:h}),G=O({type:p}),b((m=e((v=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,n(i(e),"_curState",M.GS_INIT),a(i(e),"cubePrfb",m,i(e)),a(i(e),"roadLength",P,i(e)),n(i(e),"_road",[]),a(i(e),"playerCtrl",B,i(e)),a(i(e),"startMenu",C,i(e)),a(i(e),"stepsLabel",L,i(e)),e}r(e,t);var s=e.prototype;return s.start=function(){this.curState=M.GS_INIT,this.playerCtrl.node.on("JumpEnd",this.onPlayerJumpEnd,this)},s.init=function(){this.startMenu.active=!0,this.generateRoad(),this.playerCtrl.setInputActive(!1),this.playerCtrl.node.setPosition(f()),this.playerCtrl.reset()},s.onStartButtonClicked=function(){this.curState=M.GS_PLAYING},s.generateRoad=function(){this.node.removeAllChildren(),this._road=[],this._road.push(E.BT_STONE);for(var t=1;t<this.roadLength;t++)this._road[t-1]===E.BT_NONE?this._road.push(E.BT_STONE):this._road.push(Math.floor(2*Math.random()));for(var e=0;e<this._road.length;e++){var r=this.spawnBlockByType(this._road[e]);r&&(this.node.addChild(r),r.setPosition(e,-1.5,0))}},s.onPlayerJumpEnd=function(t){this.stepsLabel.string=""+t,this.checkResult(t)},s.checkResult=function(t){t<=this.roadLength?this._road[t]==E.BT_NONE&&(this.curState=M.GS_INIT):this.curState=M.GS_INIT},s.spawnBlockByType=function(t){var e=null;switch(t){case E.BT_STONE:e=_(this.cubePrfb)}return e},o(e,[{key:"curState",set:function(t){var e=this;switch(t){case M.GS_INIT:this.init();break;case M.GS_PLAYING:this.stepsLabel.string="0",this.startMenu.active=!1,setTimeout((function(){e.playerCtrl.setInputActive(!0)}),.1);case M.GS_END:}this._curState=t}}]),e}(d)).prototype,"cubePrfb",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(v.prototype,"roadLength",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),B=e(v.prototype,"playerCtrl",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(v.prototype,"startMenu",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(v.prototype,"stepsLabel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=v))||I));s._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerController.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,o,s,n,r,u,p,c,h,_,a,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized,n=t.defineProperty},function(t){r=t.cclegacy,u=t._decorator,p=t.Node,c=t.v3,h=t.systemEvent,_=t.SystemEvent,a=t.Vec3,l=t.Component}],execute:function(){var m,d,y,P,v;r._RF.push({},"dbc74UMEx1FZYS+oMRMOhje","PlayerController",void 0);var f=u.ccclass,M=u.property;t("PlayerController",(m=f("PlayerController"),d=M({type:p}),m((v=e((P=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),u=0;u<i;u++)r[u]=arguments[u];return e=t.call.apply(t,[this].concat(r))||this,o(s(e),"BodyAnim",v,s(e)),n(s(e),"_curMoveIndex",0),n(s(e),"_startJump",!1),n(s(e),"_jumpStep",0),n(s(e),"_curJumpTime",0),n(s(e),"_curJumpSpeed",0),n(s(e),"_jumpTime",.1),n(s(e),"_curPos",c()),n(s(e),"_deltaPos",c(0,0,0)),n(s(e),"_targetPos",c()),n(s(e),"_isMoving",!1),e}i(e,t);var r=e.prototype;return r.start=function(){h.on(_.EventType.MOUSE_UP,this.onMouseUp,this)},r.onMouseUp=function(t){console.log("PlayerController EventMouse:"+t.getButton()),0===t.getButton()?this.jumpByStep(1):2===t.getButton()&&this.jumpByStep(2)},r.jumpByStep=function(t){this._isMoving||((1==t||2==t)&&this.BodyAnim.getComponent("cc.Animation").play("oneStep"),this._startJump=!0,this._jumpStep=t,this._curJumpTime=0,this._curJumpSpeed=this._jumpStep/this._jumpTime,this.node.getPosition(this._curPos),a.add(this._targetPos,this._curPos,c(this._jumpStep,0,0)),this._curMoveIndex+=t,this._isMoving=!0)},r.reset=function(){this._curMoveIndex=0},r.setInputActive=function(t){t?h.on(_.EventType.MOUSE_UP,this.onMouseUp,this):h.off(_.EventType.MOUSE_UP,this.onMouseUp,this)},r.onOnceJumpEnd=function(){this._isMoving=!1,this.node.emit("JumpEnd",this._curMoveIndex)},r.update=function(t){this._startJump&&(this._curJumpTime+=t,this._curJumpTime>this._jumpTime?(this.node.setPosition(this._targetPos),this._startJump=!1,this.onOnceJumpEnd()):(this.node.getPosition(this._curPos),this._deltaPos.x=this._curJumpSpeed*t,a.add(this._curPos,this._curPos,this._deltaPos),this.node.setPosition(this._curPos)))},e}(l)).prototype,"BodyAnim",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=P))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/Game",["./PlayerController.ts","./GameManager.ts"],(function(){"use strict";return{setters:[null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/Game', 'chunks:///_virtual/Game'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});